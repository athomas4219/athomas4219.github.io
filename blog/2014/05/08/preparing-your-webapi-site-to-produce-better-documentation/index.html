
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Preparing Your WebAPI Site to Produce Better Documentation - Andrew Thomas' Blog</title>
  <meta name="author" content="Andrew Thomas">

  
  <meta name="description" content="Introduction A WebAPI site produced from the Visual Studio 2013 template comes with an MVC area designed to provide rich help pages. For the most &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.at-dot.net/blog/2014/05/08/preparing-your-webapi-site-to-produce-better-documentation">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Andrew Thomas' Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Andrew Thomas' Blog</a></h1>
  
    <h2>Like we need another blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.at-dot.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
	<li><a href="/about">About</a></li>
	<li><a href="https://github.com/athomas4219/feedback/issues/new">Contact</a></li>  
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Preparing Your WebAPI Site to Produce Better Documentation</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-08T13:59:43-04:00" pubdate data-updated="true">May 8<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><h3>Introduction</h3>

<p>A WebAPI site produced from the Visual Studio 2013 template comes with an MVC area designed to provide rich help pages. For the most part, this functionality comes for free with the template. However, using the following instructions can help produce a richer help experience for the user by allowing you to use multiple lines in your method descriptions. You are then free to include more information about the method, including expected return codes or additional descriptive text.</p>

<h3>Walkthrough</h3>

<p><strong>Note:</strong> if you are creating a brand new site, the help area will only be created if you select the Web API project template when creating a new project.</p>

<p>First, we need to configure the project to produce the XML file used by the help system.</p>

<ul>
<li>Right-click on your WebAPI project and select <code>Properties</code></li>
<li>Click on the <code>Build</code> tab</li>
<li>In the <code>Output</code> section, click on the checkbox entitled <code>XML documentation file</code></li>
<li>In the text box, enter: <code>App_Data\XmlDocument.xml</code></li>
<li>Save the project and close the project properties page.</li>
</ul>


<p>Next, we need to configure the help system to actually consume the XML file created from the step above and produce the output web pages.</p>

<ul>
<li>Find the file <code>Areas-&gt;HelpPage-&gt;App_Start-&gt;HelpPageConfig.cs</code></li>
<li>Uncomment the line reading:</li>
</ul>


<figure class='code'><figcaption><span>Areas\HelpPage\App_Start\HelpPageConfig.cs </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="n">config</span><span class="p">.</span><span class="n">SetDocumentationProvider</span><span class="p">(</span><span class="k">new</span> <span class="n">XmlDocumentationProvider</span><span class="p">(</span><span class="n">HttpContext</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">Server</span><span class="p">.</span><span class="n">MapPath</span><span class="p">(</span><span class="s">&quot;~/App_Data/XmlDocument.xml&quot;</span><span class="p">)));</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Add configuration to set the response types like the following:</li>
</ul>


<figure class='code'><figcaption><span>Areas\HelpPage\App_Start\HelpPageConfig.cs </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="n">config</span><span class="p">.</span><span class="n">SetActualResponseType</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">MyReturnObject</span><span class="p">),</span> <span class="s">&quot;MyControllerName&quot;</span><span class="p">,</span> <span class="s">&quot;Get&quot;</span><span class="p">);</span>
</span><span class='line'><span class="n">config</span><span class="p">.</span><span class="n">SetActualResponseType</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">MyReturnObject</span><span class="p">),</span> <span class="s">&quot;MyControllerName&quot;</span><span class="p">,</span> <span class="s">&quot;Post&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next, we&rsquo;ll do a little cosmetic updating of some HTML files.</p>

<ul>
<li>Find the file <code>Areas-&gt;HelpPage-&gt;Views-&gt;Help-&gt;Index.cshtml</code></li>
<li>Change the <code>&lt;title&gt;</code> of the page to match your application</li>
<li>Remove the <code>&lt;header&gt;</code> section</li>
<li>Provide a relevant introduction</li>
</ul>


<p>In later steps, we&rsquo;re going to update our help controller to allow us to enter comments that contain many lines. In order to allow that in the HTML, we need to update a few markup files.</p>

<ul>
<li>Find the file <code>Areas-&gt;HelpPage-&gt;Views-&gt;Help-&gt;DisplayTemplates-&gt;ApiGroup.cshtml</code></li>
<li>Update the line reading:</li>
</ul>


<figure class='code'><figcaption><span>Areas\HelpPage\Views\Help\DisplayTemplates\ApiGroup.cshtml </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="n">@api</span><span class="p">.</span><span class="n">Documentation</span><span class="p">&lt;/</span><span class="n">p</span><span class="p">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>to:</p>

<figure class='code'><figcaption><span>Areas\HelpPage\Views\Help\DisplayTemplates\ApiGroup.cshtml </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;&lt;</span><span class="n">pre</span><span class="p">&gt;</span><span class="n">@api</span><span class="p">.</span><span class="n">Documentation</span><span class="p">&lt;/</span><span class="n">pre</span><span class="p">&gt;&lt;/</span><span class="n">p</span><span class="p">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next, we&rsquo;re going to add a couple CSS styles that will help the page look a little cleaner.</p>

<ul>
<li>Find the file <code>Areas-&gt;HelpPage-&gt;HelpPage.css</code></li>
<li>Add the following to the bottom of the file:</li>
</ul>


<figure class='code'><figcaption><span>Areas\HelpPage\HelpPage.css </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.api-documentation</span> <span class="nt">pre</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">background-color</span><span class="o">:</span> <span class="k">transparent</span><span class="p">;</span>
</span><span class='line'>    <span class="k">border</span><span class="o">:</span> <span class="k">transparent</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.parameter-documentation</span> <span class="nt">pre</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">background-color</span><span class="o">:</span> <span class="k">transparent</span><span class="p">;</span>
</span><span class='line'>    <span class="k">border</span><span class="o">:</span> <span class="k">transparent</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next, it&rsquo;s time to update the controller to allow us to use multiple lines in our method descriptions.</p>

<ul>
<li>Find the file <code>Areas-&gt;HelpPage-&gt;Controllers-&gt;HelpController.cs</code></li>
<li>Replace the <code>Index</code> method with the following:</li>
</ul>


<figure class='code'><figcaption><span>Areas\HelpPage\Controllers\HelpController.cs </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Index</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">descriptions</span> <span class="p">=</span> <span class="n">Configuration</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">GetApiExplorer</span><span class="p">().</span><span class="n">ApiDescriptions</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">rex</span> <span class="p">=</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="n">Text</span><span class="p">.</span><span class="n">RegularExpressions</span><span class="p">.</span><span class="n">Regex</span><span class="p">(</span><span class="s">@&quot;\n\s+&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">description</span> <span class="k">in</span> <span class="n">descriptions</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(!</span><span class="n">String</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">description</span><span class="p">.</span><span class="n">Documentation</span><span class="p">))</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">description</span><span class="p">.</span><span class="n">Documentation</span> <span class="p">=</span> <span class="n">rex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span><span class="n">description</span><span class="p">.</span><span class="n">Documentation</span><span class="p">,</span> <span class="s">&quot;\n&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">descriptions</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Replace the <code>Api</code> method with the following:</li>
</ul>


<figure class='code'><figcaption><span>Areas\HelpPage\Controllers\HelpController.cs </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Api</span><span class="p">(</span><span class="kt">string</span> <span class="n">apiId</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(!</span><span class="n">String</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">apiId</span><span class="p">))</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">HelpPageApiModel</span> <span class="n">apiModel</span> <span class="p">=</span> <span class="n">Configuration</span><span class="p">.</span><span class="n">GetHelpPageApiModel</span><span class="p">(</span><span class="n">apiId</span><span class="p">);</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">apiModel</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">rex</span> <span class="p">=</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="n">Text</span><span class="p">.</span><span class="n">RegularExpressions</span><span class="p">.</span><span class="n">Regex</span><span class="p">(</span><span class="s">@&quot;\n\s+&quot;</span><span class="p">);</span>
</span><span class='line'>            <span class="n">apiModel</span><span class="p">.</span><span class="n">ApiDescription</span><span class="p">.</span><span class="n">Documentation</span> <span class="p">=</span> <span class="n">rex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span><span class="n">apiModel</span><span class="p">.</span><span class="n">ApiDescription</span><span class="p">.</span><span class="n">Documentation</span><span class="p">,</span> <span class="s">&quot;\n&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">param</span> <span class="k">in</span> <span class="n">apiModel</span><span class="p">.</span><span class="n">ApiDescription</span><span class="p">.</span><span class="n">ParameterDescriptions</span><span class="p">)</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">param</span><span class="p">.</span><span class="n">Documentation</span> <span class="p">=</span> <span class="n">rex</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span><span class="n">param</span><span class="p">.</span><span class="n">Documentation</span><span class="p">,</span> <span class="s">&quot;\n&quot;</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="n">apiModel</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nf">View</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now your help pages should allow you to use multiple lines in your method descriptions, as well as looking a little cleaner when viewed in a browser. You can test your new help pages by navigating to <code>http://localhost/MyApplication/help/</code>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Andrew Thomas</span></span>

      








  


<time datetime="2014-05-08T13:59:43-04:00" pubdate data-updated="true">May 8<span>th</span>, 2014</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://blog.at-dot.net/blog/2014/05/08/preparing-your-webapi-site-to-produce-better-documentation/" data-via="athomas4219" data-counturl="http://blog.at-dot.net/blog/2014/05/08/preparing-your-webapi-site-to-produce-better-documentation/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/04/16/resizing-the-screen-resolution-in-ubuntu-when-you-cant-see-the-apply-button/" title="Previous Post: Resizing the screen resolution in Ubuntu when you can't see the Apply button">&laquo; Resizing the screen resolution in Ubuntu when you can't see the Apply button</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/05/13/mvc-what-is-html-dot-antiforgerytoken-and-how-does-it-actually-work/" title="Next Post: MVC: What is Html.AntiForgeryToken and how does it actually work?">MVC: What is Html.AntiForgeryToken and how does it actually work? &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/05/13/mvc-what-is-html-dot-antiforgerytoken-and-how-does-it-actually-work/">MVC: What Is Html.AntiForgeryToken and How Does It Actually Work?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/08/preparing-your-webapi-site-to-produce-better-documentation/">Preparing Your WebAPI Site to Produce Better Documentation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/16/resizing-the-screen-resolution-in-ubuntu-when-you-cant-see-the-apply-button/">Resizing the Screen Resolution in Ubuntu When You Can't See the Apply Button</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/15/outlook-has-left-the-building/">Outlook Has Left the Building</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/29/entity-framework-6-specifying-a-connectionstring-in-code/">Entity Framework 6: Specifying a ConnectionString in Code</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/athomas4219">@athomas4219</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'athomas4219',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Andrew Thomas -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'andrewthomasblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.at-dot.net/blog/2014/05/08/preparing-your-webapi-site-to-produce-better-documentation/';
        var disqus_url = 'http://blog.at-dot.net/blog/2014/05/08/preparing-your-webapi-site-to-produce-better-documentation/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
